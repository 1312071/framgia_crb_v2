<% if @overlap_when_update %>
  $('#dialog_overlap_confirm').dialog({
    buttons : {
      'Confirm' : function() {
        $('#end-date-repeat').val('<%= @time_overlap %>');
        var form =  $('#new_event');
        $.ajax({
          type: 'POST',
          url: '/events',
          dataType: 'script',
          data: $(form).serialize(),
          success: function(data) {
            $("#allow-overlap").val("true");
            $('#dialog_overlap_confirm').dialog('close');
          }
        });
        window.location = '<%= root_path %>';
      },
      'Cancel' : function() {
        $(this).dialog('close');
      }
    }
  });
  $('#dialog_overlap_confirm').dialog('open');
<% else %>
  window.location = '<%= root_path %>';
<% end %>
